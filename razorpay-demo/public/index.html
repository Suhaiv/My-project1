<!doctype html>
<html>
<head><meta charset="utf-8"><title>Pay Demo</title>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head><body>
<h2>Buy ₹99</h2>
<button id="payBtn">Pay ₹99</button>
<script>
document.getElementById('payBtn').addEventListener('click', async () => {
  const resp = await fetch('/create-order', { method: 'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ amount: 99 })});
  const order = await resp.json();
  const options = {
    key: 'rzp_test_RfHV8ZiSJaWdqh', // public Key ID (test)
    amount: order.amount,
    currency: order.currency,
    name: 'Demo Shop',
    order_id: order.id,
    handler: async function(response) {
      const verify = await fetch('/verify-payment', { method: 'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(response) });
      const result = await verify.json();
      alert(result.ok ? 'Payment verified' : 'Verification failed');
    },
    prefill: { name:'Test', email:'test@example.com' }
  };
  const rzp = new Razorpay(options); rzp.open();
});
</script>
</body></html>
